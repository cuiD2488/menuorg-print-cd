<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>托盘图标生成器</title>
    <style>
      body {
        font-family: 'Microsoft YaHei', Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #4a90e2;
        text-align: center;
      }
      .icon-preview {
        display: flex;
        gap: 20px;
        margin: 20px 0;
        justify-content: center;
      }
      .icon-item {
        text-align: center;
        background: #f9f9f9;
        padding: 15px;
        border-radius: 8px;
        border: 2px solid #e0e0e0;
      }
      canvas {
        border: 1px solid #ddd;
        margin: 10px 0;
        background: white;
      }
      .download-btn {
        background: #4a90e2;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 12px;
        margin: 5px;
      }
      .download-btn:hover {
        background: #2e5cb8;
      }
      .instructions {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
      }
      .dark-preview {
        background: #2d2d2d;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>🖼️ 托盘图标生成器</h1>

      <div class="instructions">
        <h3>📋 使用说明：</h3>
        <p>1. 下载16x16的PNG图标</p>
        <p>2. 将其保存为 <code>tray-icon.png</code> 到assets目录</p>
        <p>3. 重新启动应用即可看到托盘图标</p>
        <p><strong>注意：PNG格式在Windows托盘中更稳定</strong></p>
      </div>

      <div class="icon-preview" id="iconPreview">
        <!-- 图标将通过JavaScript生成 -->
      </div>
    </div>

    <script>
      // 优化的托盘图标绘制函数
      function drawTrayIcon(ctx, size) {
        // 清空画布
        ctx.clearRect(0, 0, size, size);

        // 使用高对比度的设计适合托盘
        const scale = size / 16;

        // 主背景 - 深蓝色圆形
        ctx.fillStyle = '#1a365d';
        ctx.beginPath();
        ctx.arc(size / 2, size / 2, size / 2 - 1, 0, 2 * Math.PI);
        ctx.fill();

        // 打印机主体 - 白色
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(3 * scale, 4 * scale, 10 * scale, 5 * scale);

        // 打印机顶部 - 浅灰色
        ctx.fillStyle = '#e2e8f0';
        ctx.fillRect(3 * scale, 4 * scale, 10 * scale, 2 * scale);

        // 纸张 - 纯白
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(4 * scale, 8 * scale, 8 * scale, 6 * scale);

        // 添加一些细节线条（仅在16x16时）
        if (size === 16) {
          ctx.strokeStyle = '#64748b';
          ctx.lineWidth = 1;
          ctx.beginPath();
          // 打印机的缝隙
          ctx.moveTo(3, 6);
          ctx.lineTo(13, 6);
          ctx.stroke();

          // 纸张上的文字线条
          ctx.beginPath();
          ctx.moveTo(5, 10);
          ctx.lineTo(11, 10);
          ctx.moveTo(5, 12);
          ctx.lineTo(10, 12);
          ctx.stroke();
        }
      }

      // 生成托盘图标
      const size = 16;
      const preview = document.getElementById('iconPreview');

      // 主图标
      const mainItem = document.createElement('div');
      mainItem.className = 'icon-item';

      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      canvas.style.width = size * 4 + 'px'; // 放大显示
      canvas.style.height = size * 4 + 'px';
      canvas.style.imageRendering = 'pixelated';

      const ctx = canvas.getContext('2d');
      drawTrayIcon(ctx, size);

      const label = document.createElement('div');
      label.textContent = `${size}×${size} 托盘图标`;
      label.style.fontWeight = 'bold';
      label.style.margin = '10px 0 5px 0';

      const filename = document.createElement('div');
      filename.textContent = 'tray-icon.png';
      filename.style.fontSize = '12px';
      filename.style.color = '#666';

      // 暗色背景预览
      const darkPreview = document.createElement('div');
      darkPreview.className = 'dark-preview';
      darkPreview.textContent = '深色托盘预览：';

      const darkCanvas = document.createElement('canvas');
      darkCanvas.width = size;
      darkCanvas.height = size;
      darkCanvas.style.width = size * 2 + 'px';
      darkCanvas.style.height = size * 2 + 'px';
      darkCanvas.style.imageRendering = 'pixelated';
      darkCanvas.style.marginLeft = '10px';

      const darkCtx = darkCanvas.getContext('2d');
      drawTrayIcon(darkCtx, size);
      darkPreview.appendChild(darkCanvas);

      const button = document.createElement('button');
      button.className = 'download-btn';
      button.textContent = '下载托盘图标';
      button.onclick = () => {
        const link = document.createElement('a');
        link.download = 'tray-icon.png';
        link.href = canvas.toDataURL();
        link.click();
      };

      mainItem.appendChild(label);
      mainItem.appendChild(filename);
      mainItem.appendChild(canvas);
      mainItem.appendChild(darkPreview);
      mainItem.appendChild(button);
      preview.appendChild(mainItem);
    </script>
  </body>
</html>
