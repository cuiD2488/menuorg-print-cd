<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ‰˜ç›˜å›¾æ ‡ç”Ÿæˆå™¨</title>
    <style>
      body {
        font-family: 'Microsoft YaHei', Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #4a90e2;
        text-align: center;
      }
      .icon-preview {
        display: flex;
        gap: 20px;
        margin: 20px 0;
        justify-content: center;
      }
      .icon-item {
        text-align: center;
        background: #f9f9f9;
        padding: 15px;
        border-radius: 8px;
        border: 2px solid #e0e0e0;
      }
      canvas {
        border: 1px solid #ddd;
        margin: 10px 0;
        background: white;
      }
      .download-btn {
        background: #4a90e2;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 12px;
        margin: 5px;
      }
      .download-btn:hover {
        background: #2e5cb8;
      }
      .instructions {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
      }
      .dark-preview {
        background: #2d2d2d;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ–¼ï¸ æ‰˜ç›˜å›¾æ ‡ç”Ÿæˆå™¨</h1>

      <div class="instructions">
        <h3>ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼š</h3>
        <p>1. ä¸‹è½½16x16çš„PNGå›¾æ ‡</p>
        <p>2. å°†å…¶ä¿å­˜ä¸º <code>tray-icon.png</code> åˆ°assetsç›®å½•</p>
        <p>3. é‡æ–°å¯åŠ¨åº”ç”¨å³å¯çœ‹åˆ°æ‰˜ç›˜å›¾æ ‡</p>
        <p><strong>æ³¨æ„ï¼šPNGæ ¼å¼åœ¨Windowsæ‰˜ç›˜ä¸­æ›´ç¨³å®š</strong></p>
      </div>

      <div class="icon-preview" id="iconPreview">
        <!-- å›¾æ ‡å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
      </div>
    </div>

    <script>
      // ä¼˜åŒ–çš„æ‰˜ç›˜å›¾æ ‡ç»˜åˆ¶å‡½æ•°
      function drawTrayIcon(ctx, size) {
        // æ¸…ç©ºç”»å¸ƒ
        ctx.clearRect(0, 0, size, size);

        // ä½¿ç”¨é«˜å¯¹æ¯”åº¦çš„è®¾è®¡é€‚åˆæ‰˜ç›˜
        const scale = size / 16;

        // ä¸»èƒŒæ™¯ - æ·±è“è‰²åœ†å½¢
        ctx.fillStyle = '#1a365d';
        ctx.beginPath();
        ctx.arc(size / 2, size / 2, size / 2 - 1, 0, 2 * Math.PI);
        ctx.fill();

        // æ‰“å°æœºä¸»ä½“ - ç™½è‰²
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(3 * scale, 4 * scale, 10 * scale, 5 * scale);

        // æ‰“å°æœºé¡¶éƒ¨ - æµ…ç°è‰²
        ctx.fillStyle = '#e2e8f0';
        ctx.fillRect(3 * scale, 4 * scale, 10 * scale, 2 * scale);

        // çº¸å¼  - çº¯ç™½
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(4 * scale, 8 * scale, 8 * scale, 6 * scale);

        // æ·»åŠ ä¸€äº›ç»†èŠ‚çº¿æ¡ï¼ˆä»…åœ¨16x16æ—¶ï¼‰
        if (size === 16) {
          ctx.strokeStyle = '#64748b';
          ctx.lineWidth = 1;
          ctx.beginPath();
          // æ‰“å°æœºçš„ç¼éš™
          ctx.moveTo(3, 6);
          ctx.lineTo(13, 6);
          ctx.stroke();

          // çº¸å¼ ä¸Šçš„æ–‡å­—çº¿æ¡
          ctx.beginPath();
          ctx.moveTo(5, 10);
          ctx.lineTo(11, 10);
          ctx.moveTo(5, 12);
          ctx.lineTo(10, 12);
          ctx.stroke();
        }
      }

      // ç”Ÿæˆæ‰˜ç›˜å›¾æ ‡
      const size = 16;
      const preview = document.getElementById('iconPreview');

      // ä¸»å›¾æ ‡
      const mainItem = document.createElement('div');
      mainItem.className = 'icon-item';

      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      canvas.style.width = size * 4 + 'px'; // æ”¾å¤§æ˜¾ç¤º
      canvas.style.height = size * 4 + 'px';
      canvas.style.imageRendering = 'pixelated';

      const ctx = canvas.getContext('2d');
      drawTrayIcon(ctx, size);

      const label = document.createElement('div');
      label.textContent = `${size}Ã—${size} æ‰˜ç›˜å›¾æ ‡`;
      label.style.fontWeight = 'bold';
      label.style.margin = '10px 0 5px 0';

      const filename = document.createElement('div');
      filename.textContent = 'tray-icon.png';
      filename.style.fontSize = '12px';
      filename.style.color = '#666';

      // æš—è‰²èƒŒæ™¯é¢„è§ˆ
      const darkPreview = document.createElement('div');
      darkPreview.className = 'dark-preview';
      darkPreview.textContent = 'æ·±è‰²æ‰˜ç›˜é¢„è§ˆï¼š';

      const darkCanvas = document.createElement('canvas');
      darkCanvas.width = size;
      darkCanvas.height = size;
      darkCanvas.style.width = size * 2 + 'px';
      darkCanvas.style.height = size * 2 + 'px';
      darkCanvas.style.imageRendering = 'pixelated';
      darkCanvas.style.marginLeft = '10px';

      const darkCtx = darkCanvas.getContext('2d');
      drawTrayIcon(darkCtx, size);
      darkPreview.appendChild(darkCanvas);

      const button = document.createElement('button');
      button.className = 'download-btn';
      button.textContent = 'ä¸‹è½½æ‰˜ç›˜å›¾æ ‡';
      button.onclick = () => {
        const link = document.createElement('a');
        link.download = 'tray-icon.png';
        link.href = canvas.toDataURL();
        link.click();
      };

      mainItem.appendChild(label);
      mainItem.appendChild(filename);
      mainItem.appendChild(canvas);
      mainItem.appendChild(darkPreview);
      mainItem.appendChild(button);
      preview.appendChild(mainItem);
    </script>
  </body>
</html>
